# Student Form Updates

## ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï StudentForm Component

### ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°

1. **‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô**
   - ‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (English)
   - ‡∏à‡∏µ‡∏ô (Chinese)

2. **‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤**
   - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©: Beginner (A1), Elementary (A2), Intermediate (B1), Upper-Intermediate (B2), Advanced (C1-C2)
   - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏µ‡∏ô: Beginner, Elementary, Intermediate, Advanced

3. **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô**
   - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (Private 1-on-1)
   - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏π‡πà (Pair 2 ‡∏Ñ‡∏ô)
   - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° (Group 3+ ‡∏Ñ‡∏ô)

4. **‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥**
   - ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©/‡∏à‡∏µ‡∏ô)
   - ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏£‡πå‡∏™)
   - **üÜï ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (Level Matching)**

5. **‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡∏à‡∏£‡∏¥‡∏á**
   - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏à‡∏≤‡∏Å `https://api.englishkorat.site/api/v1/course`
   - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Authentication Token ‡∏ú‡πà‡∏≤‡∏ô localStorage
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á Service layer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ API calls

### ‡∏Å‡∏≤‡∏£‡πÅ‡∏°‡∏õ Level ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≠‡∏£‡πå‡∏™

```typescript
const levelMatching: Record<string, string[]> = {
  'beginner': ['a1', 'beginner', 'foundation', 'basic'],
  'elementary': ['a2', 'elementary', 'foundation'],
  'intermediate': ['b1', 'intermediate'],
  'upper-intermediate': ['b2', 'upper-intermediate', 'upper-int'],
  'advanced': ['advanced', 'c1', 'c2']
};

// Special levels ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö
const specialLevels = ['private', 'business', 'travel', 'corporate', 'preparation', 'intensive', 'general training'];
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏°‡∏õ‡∏Ñ‡∏≠‡∏£‡πå‡∏™

| Course Name | Level | ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏´‡πâ User Level |
|-------------|-------|-------------------|
| Adults Conversation A1 | A1 | Beginner |
| English 4 Skills Foundation | Foundation | Beginner, Elementary |
| Business Conversation | Business | ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö |
| TOEIC Intensive | Intensive | ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö |
| Chinese 4 Skills Advanced | Advanced | Advanced |

### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```tsx
import StudentForm from '../../../components/forms/StudentForm';
import { courseService } from '../../../services/course.service';

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏à‡∏≤‡∏Å API
const courses = await courseService.getCourses();

<StudentForm
  availableCourses={courses}
  onSubmit={handleSubmit}
  onCancel={handleCancel}
  loading={loading}
  mode="create"
/>
```

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Course (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï)

```typescript
interface Course {
  id: number;
  name: string;
  code: string;
  course_type: string;
  description: string;
  price: string;
  hours_total: number;
  max_students: number;
  level: string;                // üÜï ‡πÄ‡∏û‡∏¥‡πà‡∏° level field
  branch_name: string;
  branch_code: string;
}
```

### Services ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°

1. **courseService** (`src/services/course.service.ts`)
   - `getCourses()`: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

2. **authService** (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï)
   - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å `'token'` ‡πÄ‡∏õ‡πá‡∏ô `'authToken'` ‡πÉ‡∏ô localStorage
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° `isAuthenticated()` ‡πÅ‡∏•‡∏∞ `getToken()` methods

### ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™ (Enhanced)

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö:

1. **‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤**: ‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‡∏´‡∏£‡∏∑‡∏≠ ‡∏à‡∏µ‡∏ô
2. **‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô**: ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß/‡∏Ñ‡∏π‡πà/‡∏Å‡∏•‡∏∏‡πà‡∏°
3. **üÜï ‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤**: ‡πÅ‡∏°‡∏õ user level ‡∏Å‡∏±‡∏ö course level

### API Integration

```typescript
// GET Courses
GET https://api.englishkorat.site/api/v1/course
Headers: {
  "Authorization": "Bearer {{token}}",
  "Content-Type": "application/json"
}

// POST Student (TODO)
POST https://api.englishkorat.site/api/v1/students
Headers: {
  "Authorization": "Bearer {{token}}",
  "Content-Type": "application/json"
}
Body: StudentFormData
```

### Authentication Flow

1. Login ‚Üí ‡πÄ‡∏Å‡πá‡∏ö token ‡πÉ‡∏ô `localStorage.setItem('authToken', token)`
2. Page load ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `authService.isAuthenticated()`
3. API calls ‚Üí ‡∏™‡πà‡∏á `Authorization: Bearer ${token}`
4. Token invalid ‚Üí Redirect ‡πÑ‡∏õ `/auth`

### ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï

1. `src/components/forms/StudentForm.tsx` - ‡πÄ‡∏û‡∏¥‡πà‡∏° level filtering
2. `src/services/auth.service.ts` - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô token key
3. `src/services/course.service.ts` - ‚ú® ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà
4. `src/app/students/new/page.tsx` - ‡πÉ‡∏ä‡πâ API ‡∏à‡∏£‡∏¥‡∏á
5. `STUDENT_FORM_UPDATE.md` - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

1. ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ï‡πà‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
2. ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ï‡πà‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏à‡∏µ‡∏ô  
3. ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Beginner ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™ A1, Foundation, Basic + Special levels
4. ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Advanced ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™ Advanced, C1, C2 + Special levels
5. ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà max_students = 1
6. ‚úÖ API Integration ‚Üí ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å backend ‡∏à‡∏£‡∏¥‡∏á

### TODO

- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° error handling ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö network failures
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° retry mechanism ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API calls
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á student creation API endpoint
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° loading skeleton ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö course list
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° toast notifications ‡πÅ‡∏ó‡∏ô alert()
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° course preview/details modal
